{% load static i18n %}
<html>
<head>
    <title>IO Projekt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/leaflet.css' %}">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
</head>
<body class="text-white bg-dark">
    <div id="map"></div>
    <script src="{% static 'js/bootstrap.bundle.js' %}"></script>
    <script src="{% static 'js/jquery-3.6.0.js' %}"></script>
    <script src="{% static 'js/js.cookie.js' %}"></script>
    <script src="{% static 'js/leaflet.js' %}"></script>
    <script type="text/javascript">
        let map = undefined;

        const addMarker = (pos, text) => {
            let staticIcon = new L.Icon({
                iconUrl: '{% static "images/marker-icon.png" %}',
            })

            L.marker(pos, {icon: staticIcon}).addTo(map)
                .bindPopup(text).openPopup();
        }

        const setPosition = (position) => {
            let latLong = [position.coords.latitude, position.coords.longitude];
            map.setView(latLong, 13);
            addMarker(latLong, 'JesteÅ› tutaj')
        }

        const getPosition = (position) => {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(setPosition);
            }
        }

        $(document).ready(() => {
            let defaultPos = [53.770, 20.490] // default position for Olsztyn city.
            map = L.map('map').setView(defaultPos, 13);
            getPosition();

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
        });
    </script>
</body>
</html>